<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <script src="https://unpkg.com/react@16/umd/react.production.min.js" crossorigin></script>
		<script src="https://unpkg.com/react-dom@16/umd/react-dom.production.min.js" crossorigin></script>
    <style>
      .horizontal{
        display: grid; grid-template-columns: 50% 50%;
        min-height: 200px;
      }
      .vertical{
        display: grid; grid-template-rows: 50% 50%;
      }
      .box{
        display: grid;
        grid-template-rows: 30px auto;
      }
      .boxContent{
        background-color: lightgrey;
        height: auto;
      }
      .boxTitle{
        border-bottom: 1px black solid;
        text-align: center;
      }
      .rightLine{ border-right: 1px black solid; }
      .green{ color: #3ddc84; }
      .red{ color: red; }
    </style>
  </head>
  <body>
    <div id="react"></div>
    <script type="text/babel">
      class Problem extends React.Component {
        constructor(props) {
          super(props);
          this.state = {
            success: false,
            result : "",
            try: false,
          };

          this.check = this.check.bind(this);
        }

        check(){
          var xmlhttp = new XMLHttpRequest();
          xmlhttp.onreadystatechange = () => {
            if (xmlhttp.readyState == XMLHttpRequest.DONE){
              if (xmlhttp.status == 200){
                var resultJson = JSON.parse(xmlhttp.responseText);
                this.setState({
                  success : resultJson.success,
                  result : resultJson.output,
                  try : true,
                });
              }
              else alert('something else other than 200 was returned');
            }
          };

          xmlhttp.open("POST", "url");
          xmlhttp.send({
            problemNumber : "??",
            caseNumber : this.props.index,
            language : "",
            code : "",
          });
        }

        render() {
          var tried = <i></i>;
          var imgTag,color = "black";
          if(this.state.try){
            if(this.state.success){
              tried = <i class="fas fa-check"></i>;
              color = "green";
            }
            else{
              tried = <i class="fas fa-times"></i>;
              color = "red";
            }
          }
          if(this.props.img != null){
            imgTag = <img src={this.props.img} width="100%"/>
          }

          return (
            <div style={{width: '600px'}}>
              <div class={color}>
                <span>예제 {this.props.index}</span>&nbsp;
                {tried}
                <i class="fas fa-play" style={{float: 'right'}} onClick={this.check}></i>
              </div>
              <div>{imgTag}</div>
              <div class="horizontal">
                <div class="box rightLine">
                  <div class="boxTitle">입력</div>
                  <div class="boxContent">{
                    this.props.input.split('\n').map( 
                      line => (<span>{line}<br/></span>))
                  }</div>
                </div>
                <div class="vertical">
                  <div class="box">
                    <div class="boxTitle">출력</div>
                    <div class="boxContent">{this.props.output}</div>
                  </div>
                  <div class="box">
                    <div class="boxTitle">결과</div>
                    <div class="boxContent">{this.state.result}</div>
                  </div>
                </div>
              </div>
            </div>
          );
        }
      }

      const problem = <Problem index="1" img="https://miro.medium.com/max/12032/1*1X0-98EiQNkwBJj2vnTTqQ.jpeg" input="1&#13;&#10;2&#13;&#10;3&#13;&#10;4" output="1234"/>;
      const domContainer = document.querySelector('#react');
			ReactDOM.render(problem, domContainer);
    </script>
  </body>
</html>

<!-- <div style="width: 600px;">
  <div>
    <span>예제 1</span>
    <i class="fas fa-check"></i>
    <i class="fas fa-play" style="float:right;"></i>
  </div>
  <div><img src="https://i.stack.imgur.com/vhoa0.jpg" width="100%" alt="혹시나 그림이 있다면"></div>
  <div style="display: grid; grid-template-columns: 50% 50%;">
    <div>
      <div>input</div>
      <div>
        1<br>4<br>3<br>2
      </div>
    </div>
    <div style="display: grid; grid-template-rows: 50% 50%;">
      <div>
        <div>output</div>
        <div>1234</div>
      </div>
      <div>
        <div>your result</div>
        <div>4321</div>
      </div>
    </div>
  </div>
</div> -->